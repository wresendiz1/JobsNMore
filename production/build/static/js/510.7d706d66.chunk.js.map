{"version":3,"file":"static/js/510.7d706d66.chunk.js","mappings":"iOAyIA,UAjIA,WACE,IAAAA,GAAwBC,EAAAA,EAAAA,YAAUC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA3BI,EAAIF,EAAA,GAAEG,EAAOH,EAAA,GACpBI,GAAwBL,EAAAA,EAAAA,YAAUM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAA3BE,EAAID,EAAA,GAAEE,EAAOF,EAAA,GACdG,GAAQC,EAAAA,EAAAA,UACRC,GAAOD,EAAAA,EAAAA,UACPE,GAAiBF,EAAAA,EAAAA,QAAO,IAwE9B,OAtEAG,EAAAA,EAAAA,YAAU,WACRC,MAAM,aACHC,MAAK,SAACC,GAAG,OAAKA,EAAIC,MAAM,IACxBF,MAAK,SAACG,GACLV,EAAQU,EAAW,MACnBd,EAAQc,EAAW,KAErB,IACCC,OAAM,SAACC,GAAG,OAAKC,QAAQC,IAAIF,EAAI,GACpC,GAAG,KA8DDG,EAAAA,EAAAA,MAACC,EAAAA,EAAU,CAAAC,SAAA,CACRtB,IACCuB,EAAAA,EAAAA,KAACC,EAAAA,EAAO,CACNC,UAAW,OACXzB,KAAMA,EACN0B,QAzCS,SAAClB,EAAMF,EAAOqB,GAC7BA,EAAEC,iBACFjB,MAAM,kBAADkB,OACe7B,EAAK,GAAG8B,aAAY,cAAAD,OAAapB,EAAesB,QAAQC,MAAK,aAAAH,OAAYrB,EAAKuB,QAAQC,MAAK,WAAAH,OAAUvB,EAAMyB,QAAQC,QAEpIpB,MAAK,SAACC,GAAG,OAAKA,EAAIC,MAAM,IACxBF,MAAK,SAACG,GACLV,EAAQU,EAAW,MACnBd,EAAQc,EAAW,KACrB,GACJ,EAgCQkB,WA9BW,CACjB,CAAEC,GAAI,KAAMC,KAAM,aAClB,CAAED,GAAI,UAAWC,KAAM,WACvB,CAAED,GAAI,aAAcC,KAAM,eAC1B,CAAED,GAAI,UAAWC,KAAM,gBACvB,CAAED,GAAI,WAAYC,KAAM,mBACxB,CAAED,GAAI,WAAYC,KAAM,cAyBlB7B,MAAOA,EACPE,KAAMA,EACN4B,aA5DY,SAAC3B,EAAgBkB,GACnCA,EAAEC,iBAGAjB,MAAM,4BAADkB,OACyBrB,EAAKuB,QAAQC,MAAK,WAAAH,OAAUvB,EAAMyB,QAAQC,MAAK,cAAAH,OAAapB,EAAesB,QAAQC,QAE9GpB,MAAK,SAACC,GAAG,OAAKA,EAAIC,MAAM,IACxBF,MAAK,SAACG,GACLV,EAAQU,EAAW,MACnBd,EAAQc,EAAW,KACrB,GAEN,EAgDQN,eAAgBA,KAGpBc,EAAAA,EAAAA,KAACc,EAAAA,EAAS,CAACC,UAAU,0CAAyChB,SAC3DlB,GACCA,EAAKmC,KAAI,SAACC,GAAG,OACXjB,EAAAA,EAAAA,KAACkB,EAAAA,EAAI,CAAiBH,UAAU,MAAMI,MAAO,CAAEC,MAAO,SAAUrB,UAC9DF,EAAAA,EAAAA,MAACqB,EAAAA,EAAAA,KAAS,CAAAnB,SAAA,EACRC,EAAAA,EAAAA,KAACkB,EAAAA,EAAAA,MAAU,CAAAnB,SAAEkB,EAAII,YACjBrB,EAAAA,EAAAA,KAACkB,EAAAA,EAAAA,SAAa,CAACH,UAAU,kBAAiBhB,SACvCkB,EAAIK,WAGPtB,EAAAA,EAAAA,KAACkB,EAAAA,EAAAA,KAAS,CAAAnB,SAAEkB,EAAIM,YAChBvB,EAAAA,EAAAA,KAACwB,EAAAA,EAAM,CACLC,QAAQ,UACRC,KAAMT,EAAIU,IACVC,OAAO,SACPC,IAAI,sBAAqB9B,SAC1B,cAGDC,EAAAA,EAAAA,KAAC8B,EAAAA,GAAI,CAACC,GAAE,SAAAzB,OAAWW,EAAIe,IAAMjB,UAAU,uBAAsBhB,SAAC,kBAhBvDkB,EAAQ,GAoBZ,OAGbjB,EAAAA,EAAAA,KAACc,EAAAA,EAAS,CAACC,UAAU,gCAA+BhB,SACjDlB,IACCmB,EAAAA,EAAAA,KAACiC,EAAAA,EAAa,CACZC,OAtGS,SAACC,GAClB,IAAMC,EAAG,qBAAA9B,OAAwBrB,EAAKuB,QAAQC,MAAK,WAAAH,OAAUvB,EAAMyB,QAAQC,MAAK,cAAAH,OAAapB,EAAesB,QAAQC,MAAK,WACzH4B,EAAAA,EAAAA,GAAYF,EAAQC,EAAK3D,GAAMY,MAAK,SAACG,GACnCV,EAAQU,EAAW,MACnBd,EAAQc,EAAW,KAErB,GACF,EAgGU8C,YAAa7D,EAAK,GAAG8D,MACrBhC,aAAc9B,EAAK,GAAG8B,mBAMlC,C","sources":["pages/Jobs/Jobs.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { getPageData } from \"../../components/Pagination/PaginationHelper\";\nimport { Container, Card, Button } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport MainLayout from \"../../components/Layout/MainLayout\";\nimport PaginationBar from \"../../components/Pagination/Pagination\";\nimport Sorting from \"../../components/Sorting/Sorting\";\n\nfunction Jobs() {\n  const [page, setPage] = useState();\n  const [jobs, setJobs] = useState();\n  const order = useRef();\n  const sort = useRef();\n  const items_per_page = useRef(50);\n\n  useEffect(() => {\n    fetch(\"/api/jobs\")\n      .then((res) => res.json())\n      .then((data) => {\n        setJobs(data[\"Jobs\"]);\n        setPage(data[\"Page\"]);\n        // console.log(data[\"Jobs\"][0]);\n      })\n      .catch((err) => console.log(err));\n  }, []);\n\n  const ChangePage = (action) => {\n    const url = `/api/jobs?sort_by=${sort.current.value}&order=${order.current.value}&per_page=${items_per_page.current.value}&page=`;\n    getPageData(action, url, page).then((data) => {\n      setJobs(data[\"Jobs\"]);\n      setPage(data[\"Page\"]);\n      // console.log(data[\"Page\"][0]);\n    });\n  };\n\n  const ShowPerPage = (items_per_page, e) => {\n    e.preventDefault();\n    {\n      // console.log(items_per_page.current.value)\n      fetch(\n        `/api/jobs?page=1&sort_by=${sort.current.value}&order=${order.current.value}&per_page=${items_per_page.current.value}`\n      )\n        .then((res) => res.json())\n        .then((data) => {\n          setJobs(data[\"Jobs\"]);\n          setPage(data[\"Page\"]);\n        });\n    }\n  };\n\n  const sortPage = (sort, order, e) => {\n    e.preventDefault();\n    fetch(\n      `/api/jobs?page=${page[0].current_page}&per_page=${items_per_page.current.value}&sort_by=${sort.current.value}&order=${order.current.value}`\n    )\n      .then((res) => res.json())\n      .then((data) => {\n        setJobs(data[\"Jobs\"]);\n        setPage(data[\"Page\"]);\n      });\n  };\n\n  const value_name = [\n    { id: \"Id\", name: \"Relevance\" },\n    { id: \"Company\", name: \"Company\" },\n    { id: \"DatePosted\", name: \"Date Posted\" },\n    { id: \"JCityID\", name: \"Job Location\" },\n    { id: \"OnetCode\", name: \"Occupation Code\" },\n    { id: \"JobTitle\", name: \"Job Title\" },\n  ];\n\n  // const handleSubmit = (sort, order) => {\n  //   return (e) => {\n  //     e.preventDefault();\n  //     fetch(\n  //       `/api/jobs?page=${page[0].current_page}&sort_by=${sort.current.value}&order=${order.current.value}`\n  //     )\n  //       .then((res) => res.json())\n  //       .then((data) => {\n  //         setJobs(data[\"Jobs\"]);\n  //         setPage(data[\"Page\"]);\n  //       });\n  //   };\n  // };\n\n  return (\n    <MainLayout>\n      {page && (\n        <Sorting\n          page_name={\"Jobs\"}\n          page={page}\n          handler={sortPage}\n          value_name={value_name}\n          order={order}\n          sort={sort}\n          show_handler={ShowPerPage}\n          items_per_page={items_per_page}\n        />\n      )}\n      <Container className=\"d-flex flex-wrap justify-content-center\">\n        {jobs &&\n          jobs.map((job) => (\n            <Card key={job[\"Id\"]} className=\"m-3\" style={{ width: \"18rem\" }}>\n              <Card.Body>\n                <Card.Title>{job.JobTitle}</Card.Title>\n                <Card.Subtitle className=\"mb-2 text-muted\">\n                  {job.Company}\n                </Card.Subtitle>\n                {/* TODO: query occupation DB to get average pay or use google API in next phase */}\n                <Card.Text>{job.Location}</Card.Text>\n                <Button\n                  variant=\"primary\"\n                  href={job.Url}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  View Job\n                </Button>\n                <Link to={`/jobs/${job.Id}`} className=\"btn btn-primary mx-2\">\n                  More Info\n                </Link>\n              </Card.Body>\n            </Card>\n          ))}\n      </Container>\n      <Container className=\"d-flex justify-content-center\">\n        {jobs && (\n          <PaginationBar\n            change={ChangePage}\n            total_pages={page[0].total}\n            current_page={page[0].current_page}\n          />\n        )}\n      </Container>\n    </MainLayout>\n  );\n}\nexport default Jobs;\n"],"names":["_useState","useState","_useState2","_slicedToArray","page","setPage","_useState3","_useState4","jobs","setJobs","order","useRef","sort","items_per_page","useEffect","fetch","then","res","json","data","catch","err","console","log","_jsxs","MainLayout","children","_jsx","Sorting","page_name","handler","e","preventDefault","concat","current_page","current","value","value_name","id","name","show_handler","Container","className","map","job","Card","style","width","JobTitle","Company","Location","Button","variant","href","Url","target","rel","Link","to","Id","PaginationBar","change","action","url","getPageData","total_pages","total"],"sourceRoot":""}
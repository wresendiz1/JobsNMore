{"version":3,"file":"static/js/500.453b4032.chunk.js","mappings":"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","sources":["pages/Jobs/LocationJobs.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport Container from \"react-bootstrap/esm/Container\";\nimport Card from \"react-bootstrap/Card\";\nimport { Link, useParams } from \"react-router-dom\";\nimport MainLayout from \"../../components/Layout/MainLayout\";\nimport Button from \"react-bootstrap/esm/Button\";\nimport PaginationBar from \"../../components/Pagination/Pagination\";\nimport { getPageData } from \"../../components/Pagination/PaginationHelper\";\nimport Sorting from \"../../components/Sorting/Sorting\";\n\nfunction LocationsJobs() {\n  const [page, setPage] = useState();\n  const [jobs, setJobs] = useState();\n  const { id } = useParams();\n  const order = useRef();\n  const sort = useRef();\n  const items_per_page = useRef(50);\n\n  useEffect(() => {\n    fetch(`/api/jobs/location/${id}`)\n      .then((res) => res.json())\n      .then((data) => {\n        setJobs(data[\"Jobs\"]);\n        setPage(data[\"Page\"]);\n      })\n      .catch((err) => console.log(err));\n  }, []);\n\n  const ChangePage = (action) => {\n    const url = `/api/jobs/location/${id}?sort_by=${sort.current.value}&order=${order.current.value}&per_page=${items_per_page.current.value}&page=`;\n    getPageData(action, url, page).then((data) => {\n      setJobs(data[\"Jobs\"]);\n      setPage(data[\"Page\"]);\n    });\n  };\n\n  const ShowPerPage = (items_per_page, e) => {\n    e.preventDefault();\n    {\n      // console.log(items_per_page.current.value)\n      fetch(\n        `/api/jobs/location/${id}?page=1&sort_by=${sort.current.value}&order=${order.current.value}&per_page=${items_per_page.current.value}`\n      )\n        .then((res) => res.json())\n        .then((data) => {\n          setJobs(data[\"Jobs\"]);\n          setPage(data[\"Page\"]);\n        });\n    }\n  };\n\n  const sortPage = (sort, order, e) => {\n    e.preventDefault();\n    fetch(\n      `/api/jobs/location/${id}?page=${page[0].current_page}&per_page=${items_per_page.current.value}&sort_by=${sort.current.value}&order=${order.current.value}`\n    )\n      .then((res) => res.json())\n      .then((data) => {\n        setJobs(data[\"Jobs\"]);\n        setPage(data[\"Page\"]);\n      });\n  };\n\n  const value_name = [\n    { id: \"Id\", name: \"Relevance\" },\n    { id: \"Company\", name: \"Company\" },\n    { id: \"DatePosted\", name: \"Date Posted\" },\n    { id: \"JCityID\", name: \"Job Location\" },\n    { id: \"OnetCode\", name: \"Occupation Code\" },\n    { id: \"JobTitle\", name: \"Job Title\" },\n  ];\n\n  return (\n    <MainLayout>\n      {jobs && (\n        <Sorting\n          page_name={jobs[0].JobLocation}\n          page={page}\n          handler={sortPage}\n          value_name={value_name}\n          order={order}\n          sort={sort}\n          show_handler={ShowPerPage}\n          items_per_page={items_per_page}\n        />\n      )}\n      <Container className=\"d-flex flex-wrap justify-content-center\">\n        {jobs &&\n          jobs.map((job) => (\n            <Card key={job[\"Id\"]} className=\"m-3\" style={{ width: \"18rem\" }}>\n              <Card.Body>\n                <Card.Title>{job[\"JobTitle\"]}</Card.Title>\n                <Card.Subtitle className=\"mb-2 text-muted\">\n                  {job[\"Company\"]}\n                </Card.Subtitle>\n                {/* TODO: query occupation DB to get average pay or use google API in next phase */}\n                <Card.Text>{job[\"Location\"]}</Card.Text>\n                <Button\n                  variant=\"primary\"\n                  href={job[\"Url\"]}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  View Job\n                </Button>\n                <Link to={`/jobs/${job.Id}`} className=\"btn btn-primary mx-2\">\n                  More Info\n                </Link>\n              </Card.Body>\n            </Card>\n          ))}\n      </Container>\n      <Container className=\"d-flex flex-wrap justify-content-center\">\n        {jobs && (\n          <PaginationBar\n            change={ChangePage}\n            total_pages={page[0].total}\n            current_page={page[0].current_page}\n          />\n        )}\n      </Container>\n    </MainLayout>\n  );\n}\n\nexport default LocationsJobs;\n"],"names":["_useState","useState","_useState2","_slicedToArray","page","setPage","_useState3","_useState4","jobs","setJobs","id","useParams","order","useRef","sort","items_per_page","useEffect","fetch","concat","then","res","json","data","catch","err","console","log","_jsxs","MainLayout","children","_jsx","Sorting","page_name","JobLocation","handler","e","preventDefault","current_page","current","value","value_name","name","show_handler","Container","className","map","job","Card","style","width","Button","variant","href","target","rel","Link","to","Id","PaginationBar","change","action","url","getPageData","total_pages","total"],"sourceRoot":""}